// --- Language Translations ---
const translations = {
    en: {
        pageTitle: "Explore Southern Rajasthan: Banswara & Dungarpur",
        heroHeading: "Discover the Charms of Banswara & Dungarpur",
        heroSubheading: "Unveiling the Hidden Gems of Southern Rajasthan, India",
        startExploringBtn: "Start Exploring",
        navBanswara: "Banswara",
        navDungarpur: "Dungarpur",
        navContact: "Contact Us",
        banswaraSectionTitle: "Banswara - The City of Hundred Islands",
        mahiDamTitle: "Mahi Bajaj Sagar Dam",
        mahiDamDesc: "A colossal dam on the Mahi River, offering breathtaking panoramic views and serene picnic spots. It's truly a sight to behold, surrounded by picturesque small islands.",
        anandSagarTitle: "Anand Sagar Lake (Bai Talab)",
        anandSagarDesc: "A captivating artificial lake near the city, ideal for tranquil boating and enjoying magnificent sunsets. Its banks are adorned with historic cenotaphs of past rulers.",
        abdullahPirTitle: "Abdullah Pir Dargah",
        abdullahPirDesc: "A revered shrine, significant for the Bohra Muslim community, known for its tranquil atmosphere and annual Urs fair attracting devotees from across the globe.",
        dungarpurSectionTitle: "Dungarpur - The City of Hills",
        udaiBilasTitle: "Udai Bilas Palace",
        udaiBilasDesc: "A magnificent royal residence exquisitely crafted from local blue grey stone, situated gracefully on the banks of Gaib Sagar Lake. It boasts intricate carvings and grand architecture.",
        gaibSagarTitle: "Gaib Sagar Lake",
        gaibSagarDesc: "A serene and picturesque lake, nestled in the heart of Dungarpur. It's famous for the sacred shrines of Shrinathji and Vijay Rajrajeshwar, alongside other ancient temples.",
        junaMahalTitle: "Juna Mahal (Old Palace)",
        junaMahalDesc: "An impressive 13th-century fort-palace, showcasing a blend of traditional Rajput and Mughal architectural styles, adorned with beautiful frescoes and murals.",
        contactSectionTitle: "Get in Touch!",
        contactIntro: "Have questions about planning your trip, or just want to know more about these incredible destinations? We'd love to hear from you!",
        formNameLabel: "Your Name:",
        formEmailLabel: "Your Email:",
        formMessageLabel: "Your Message:",
        formSubmitBtn: "Send Message",
        exploreMoreBtn: "Explore More",
        footerCopyright: "&copy; 2025 Discover Southern Rajasthan. All rights reserved.",
        footerTagline: "Created with passion for travel.",
        alertLearnMore: "Exploring more about {placeName}! In a real application, this would lead to a dedicated page or a detailed modal pop-up.",
        alertFormSuccess: "Thank you, {name}! Your message has been received. We'll get back to you at {email} soon.",
        alertFormError: "Please fill in all fields before sending your message.",
        alertFormSubmitFailed: "There was an error sending your message. Please try again later."
    },
    hi: {
        pageTitle: "दक्षिणी राजस्थान का अन्वेषण करें: बांसवाड़ा और डूंगरपुर",
        heroHeading: "बांसवाड़ा और डूंगरपुर के आकर्षणों की खोज करें",
        heroSubheading: "दक्षिणी राजस्थान, भारत के छिपे हुए रत्नों का अनावरण",
        startExploringBtn: "अन्वेषण शुरू करें",
        navBanswara: "बांसवाड़ा",
        navDungarpur: "डूंगरपुर",
        navContact: "हमसे संपर्क करें",
        banswaraSectionTitle: "बांसवाड़ा - सौ द्वीपों का शहर",
        mahiDamTitle: "माही बजाज सागर बांध",
        mahiDamDesc: "माही नदी पर एक विशाल बांध, लुभावने मनोरम दृश्यों और शांत पिकनिक स्थलों की पेशकश करता है। यह वास्तव में देखने लायक है, जो कई छोटे द्वीपों से घिरा हुआ है।",
        anandSagarTitle: "आनंद सागर झील (बाई तालाब)",
        anandSagarDesc: "शहर के पास एक मनमोहक कृत्रिम झील, शांत नौका विहार और शानदार सूर्यास्त का आनंद लेने के लिए आदर्श। इसके किनारों पर पिछले शासकों की ऐतिहासिक छतरियां हैं।",
        abdullahPirTitle: "अब्दुल्ला पीर दरगाह",
        abdullahPirDesc: "बोहरा मुस्लिम समुदाय के लिए एक पूजनीय तीर्थस्थल, जो अपने शांत वातावरण और वार्षिक उर्स मेले के लिए जाना जाता है, जो दुनिया भर से भक्तों को आकर्षित करता है।",
        dungarpurSectionTitle: "डूंगरपुर - पहाड़ियों का शहर",
        udaiBilasTitle: "उदय बिलास पैलेस",
        udaiBilasDesc: "गाईब सागर झील के तट पर खूबसूरती से निर्मित एक शानदार शाही निवास, जो स्थानीय नीले भूरे पत्थर से उत्कृष्ट रूप से तैयार किया गया है। इसमें जटिल नक्काशी और भव्य वास्तुकला है।",
        gaibSagarTitle: "गाईब सागर झील",
        gaibSagarDesc: "डूंगरपुर के मध्य में स्थित एक शांत और सुरम्य झील। यह श्रीनाथजी और विजय राजराजेश्वर के पवित्र मंदिरों के साथ-साथ अन्य प्राचीन मंदिरों के लिए प्रसिद्ध है।",
        junaMahalTitle: "जूना महल (पुराना महल)",
        junaMahalDesc: "एक प्रभावशाली 13वीं सदी का किला-महल, जो पारंपरिक राजपूत और मुगल वास्तुकला शैलियों का मिश्रण प्रदर्शित करता है, जिसमें सुंदर भित्तिचित्र और भित्ति चित्र सुशोभित हैं।",
        contactSectionTitle: "संपर्क करें!",
        contactIntro: "अपनी यात्रा की योजना बनाने के बारे में प्रश्न हैं, या बस इन अविश्वसनीय स्थलों के बारे में अधिक जानना चाहते हैं? हमें आपसे सुनकर खुशी होगी!",
        formNameLabel: "आपका नाम:",
        formEmailLabel: "आपका ईमेल:",
        formMessageLabel: "आपका संदेश:",
        formSubmitBtn: "संदेश भेजें",
        exploreMoreBtn: "और जानें",
        footerCopyright: "&copy; 2025 दक्षिणी राजस्थान का अन्वेषण करें। सर्वाधिकार सुरक्षित।",
        footerTagline: "यात्रा के प्रति जुनून के साथ बनाया गया।",
        alertLearnMore: "{placeName} के बारे में और अधिक जानकारी प्राप्त कर रहे हैं! वास्तविक एप्लिकेशन में, यह एक समर्पित पृष्ठ या एक विस्तृत मोडल पॉप-अप की ओर ले जाएगा।",
        alertFormSuccess: "धन्यवाद, {name}! आपका संदेश प्राप्त हो गया है। हम जल्द ही आपसे {email} पर संपर्क करेंगे।",
        alertFormError: "कृपया अपना संदेश भेजने से पहले सभी फ़ील्ड भरें।",
        alertFormSubmitFailed: "आपका संदेश भेजने में कोई त्रुटि हुई। कृपया बाद में पुनः प्रयास करें।"
    }
};

let currentLang = 'en'; // Default language

function setLanguage(lang) {
    currentLang = lang;
    // Update data-lang attribute on the <html> tag
    document.documentElement.lang = lang;

    // Update page title
    const pageTitleElement = document.querySelector('title');
    if (pageTitleElement && translations[lang]['pageTitle']) {
        pageTitleElement.textContent = translations[lang]['pageTitle'];
    }


    // Iterate over all elements with a data-key attribute
    document.querySelectorAll('[data-key]').forEach(element => {
        const key = element.getAttribute('data-key');
        if (translations[lang] && translations[lang][key]) { // Ensure the key exists for the current language
            const translatedText = translations[lang][key];

            // Handle different element types
            if (element.tagName === 'INPUT' && element.type === 'submit') {
                element.value = translatedText; // For submit buttons
            } else if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                // For other input fields like text, email, textarea (labels are handled below)
                // If you had placeholders with data-keys, you would set them here:
                // if (element.hasAttribute('placeholder')) { element.placeholder = translatedText; }
                // For now, these inputs themselves don't have text content changed by data-key.
                // Their associated labels have data-keys.
            } else {
                element.innerHTML = translatedText;
            }
        }
    });

    // Handle "Explore More" buttons specifically as their `data-place` is dynamic
    // They also have `data-key="exploreMoreBtn"` in HTML now
    document.querySelectorAll('.learn-more-btn').forEach(button => {
        if (translations[lang] && translations[lang]['exploreMoreBtn']) {
            button.textContent = translations[lang]['exploreMoreBtn'];
        }
    });

    // Update active class for language buttons
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.lang === lang) {
            btn.classList.add('active');
        }
    });
}

// --- // --- Event Listeners ---
document.addEventListener('DOMContentLoaded', () => {
    // Attempt to get preferred language from local storage or browser, otherwise default to 'en'
    const storedLang = localStorage.getItem('preferredLang');
    if (storedLang && translations[storedLang]) {
        currentLang = storedLang;
    } else {
        // You could also try to detect browser language here
        // const browserLang = navigator.language.split('-')[0];
        // if (translations[browserLang]) { currentLang = browserLang; }
    }
    setLanguage(currentLang); // Set initial language

    // Language switch button click handler
    const langEnBtn = document.getElementById('lang-en');
    const langHiBtn = document.getElementById('lang-hi');

    if (langEnBtn) {
        langEnBtn.addEventListener('click', () => {
            setLanguage('en');
            localStorage.setItem('preferredLang', 'en'); // Store preference
        });
    }
    if (langHiBtn) {
        langHiBtn.addEventListener('click', () => {
            setLanguage('hi');
            localStorage.setItem('preferredLang', 'hi'); // Store preference
        });
    }

    // Event delegation for "Explore More" buttons (now handles only BUTTONs)
    const mainContent = document.querySelector('main');
    if (mainContent) {
        mainContent.addEventListener('click', (event) => {
            // Check if the clicked element is a button with the class learn-more-btn
            // AND if it's not an <a> tag (which handles its own navigation)
            if (event.target.classList.contains('learn-more-btn') && event.target.tagName === 'BUTTON') {
                const placeName = event.target.dataset.place; // Get English name from data-place
                const alertMessageTemplate = translations[currentLang]['alertLearnMore'];
                const alertMessage = alertMessageTemplate.replace('{placeName}', placeName);
                alert(alertMessage);
            }
        });
    }

    // Handle Contact Form Submission
    const contactForm = document.querySelector('.contact-form');
    // ... (rest of the contact form JS code remains the same) ...
    if (contactForm) {
        contactForm.addEventListener('submit', function (e) {
            e.preventDefault();

            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;

            if (name === "" || email === "" || message === "") {
                alert(translations[currentLang]['alertFormError']);
                return;
            }

            const successMessageTemplate = translations[currentLang]['alertFormSuccess'];
            const successMessage = successMessageTemplate.replace('{name}', name).replace('{email}', email);
            alert(successMessage);
            contactForm.reset();
        });
    }

    // Smooth scrolling for navigation links
    document.querySelectorAll('nav ul li a').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            if (this.getAttribute('href').startsWith('#')) {
                e.preventDefault();

                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);

                if (targetElement) {
                    const navHeight = document.querySelector('nav').offsetHeight;
                    window.scrollTo({
                        top: targetElement.offsetTop - navHeight - 10,
                        behavior: 'smooth'
                    });
                }
            }
        });
    });
});